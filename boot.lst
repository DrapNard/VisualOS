     1                                  [BITS 16]
     2                                  [ORG 0x7C00]
     3                                  
     4                                  start:
     5 00000000 FA                          cli
     6 00000001 B8C007                      mov ax, 0x07C0              ; Setup stack at 0x7C00
     7 00000004 8ED0                        mov ss, ax
     8 00000006 BC007C                      mov sp, 0x7C00
     9                                  
    10                                      ; Display boot message
    11 00000009 BE[4100]                    mov si, boot_msg
    12                                  print_message:
    13 0000000C AC                          lodsb
    14 0000000D 08C0                        or al, al
    15 0000000F 7406                        jz load_kernel
    16 00000011 B40E                        mov ah, 0x0E
    17 00000013 CD10                        int 0x10
    18 00000015 EBF5                        jmp print_message
    19                                  
    20                                  load_kernel:
    21 00000017 B80010                      mov ax, 0x1000              ; Load kernel at 0x1000:0x0000
    22 0000001A 8EC0                        mov es, ax
    23 0000001C 31DB                        xor bx, bx
    24 0000001E B402                        mov ah, 0x02                ; Read sectors using BIOS
    25 00000020 B005                        mov al, 5                   ; Number of sectors to read
    26 00000022 B500                        mov ch, 0
    27 00000024 B102                        mov cl, 2
    28 00000026 B600                        mov dh, 0
    29 00000028 CD13                        int 0x13
    30 0000002A 7205                        jc error                    ; Jump if disk read fails
    31                                  
    32                                      ; Jump to kernel entry point
    33 0000002C EA00000010                  jmp 0x1000:0x0000
    34                                  
    35                                  error:
    36                                      ; Display error message
    37 00000031 BE[5300]                    mov si, error_msg
    38                                  print_error:
    39 00000034 AC                          lodsb
    40 00000035 08C0                        or al, al
    41 00000037 7406                        jz halt
    42 00000039 B40E                        mov ah, 0x0E
    43 0000003B CD10                        int 0x10
    44 0000003D EBF5                        jmp print_error
    45                                  
    46                                  halt:
    47 0000003F FA                          cli
    48 00000040 F4                          hlt
    49                                  
    50 00000041 4C6F6164696E67204B-     boot_msg db "Loading Kernel...", 0
    50 0000004A 65726E656C2E2E2E00 
    51 00000053 4469736B2072656164-     error_msg db "Disk read error! Halting.", 0
    51 0000005C 206572726F72212048-
    51 00000065 616C74696E672E00   
    52                                  
    53 0000006D 00<rep 191h>            times 510-($-$$) db 0
    54 000001FE 55AA                    dw 0xAA55                       ; Boot signature
